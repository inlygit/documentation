# Self-Hosting with Docker

## Learn how to configure and deploy Supabase with Docker.

---

Docker is the easiest way to get started with self-hosted Supabase. It should only take you a few minutes to get up and running. This guide assumes you are running the command from the machine you intend to host from.

## Contents[#](https://supabase.com/docs/guides/self-hosting/docker#contents)

1. [Before you begin](https://supabase.com/docs/guides/self-hosting/docker#before-you-begin)
2. [Installing and running Supabase](https://supabase.com/docs/guides/self-hosting/docker#installing-and-running-supabase)
3. [Accessing your services](https://supabase.com/docs/guides/self-hosting/docker#accessing-supabase-studio)
4. [Updating your services](https://supabase.com/docs/guides/self-hosting/docker#updating-your-services)
5. [Securing your services](https://supabase.com/docs/guides/self-hosting/docker#securing-your-services)

## Before you begin[#](https://supabase.com/docs/guides/self-hosting/docker#before-you-begin)

You need the following installed in your system: [Git](https://git-scm.com/downloads) and Docker ([Windows](https://docs.docker.com/desktop/install/windows-install/), [macOS](https://docs.docker.com/desktop/install/mac-install/), or [Linux](https://docs.docker.com/desktop/install/linux-install/)).

### третий уровень

## Installing and running Supabase[#](https://supabase.com/docs/guides/self-hosting/docker#installing-and-running-supabase)

Follow these steps to start Supabase on your machine:

General
```
# Get the code
git clone --depth 1 https://github.com/supabase/supabase

# Go to the docker folder
cd supabase/docker

# Copy the fake env vars
cp .env.example .env

# Pull the latest images
docker compose pull

# Start the services (in detached mode)
docker compose up -d

```

Advanced
```
# Get the code using git sparse checkout
git clone --filter=blob:none --no-checkout https://github.com/supabase/supabase
cd supabase
git sparse-checkout set --cone docker && git checkout master

# Go to the docker folder
cd docker

# Copy the fake env vars
cp .env.example .env

# Pull the latest images
docker compose pull

# Start the services (in detached mode)
docker compose up -d
 
```

If you are using rootless docker, edit `.env` and set `DOCKER_SOCKET_LOCATION` to your docker socket location. For example: `/run/user/1000/docker.sock`. Otherwise, you will see an error like `container supabase-vector exited (0)`.

After all the services have started you can see them running in the background:

```
1  docker compose ps            
```

All of the services should have a status `running (healthy)`. If you see a status like `created` but not `running`, try starting that service manually with `docker compose start <service-name>`.

Your app is now running with default credentials. [Secure your services](https://supabase.com/docs/guides/self-hosting/docker#securing-your-services) as soon as possible using the instructions below.

### Accessing Supabase Studio[#](https://supabase.com/docs/guides/self-hosting/docker#accessing-supabase-studio)

You can access Supabase Studio through the API gateway on port `8000`. For example: `http://<your-ip>:8000`, or [localhost:8000](http://localhost:8000/) if you are running Docker locally.

You will be prompted for a username and password. By default, the credentials are:

- Username: `supabase`
- Password: `this_password_is_insecure_and_should_be_updated`

You should change these credentials as soon as possible using the [instructions](https://supabase.com/docs/guides/self-hosting/docker#dashboard-authentication) below.

### Accessing the APIs[#](https://supabase.com/docs/guides/self-hosting/docker#accessing-the-apis)

Each of the APIs are available through the same API gateway:

- REST: `http://<your-ip>:8000/rest/v1/`
- Auth: `http://<your-domain>:8000/auth/v1/`
- Storage: `http://<your-domain>:8000/storage/v1/`
- Realtime: `http://<your-domain>:8000/realtime/v1/`

### Accessing your Edge Functions[#](https://supabase.com/docs/guides/self-hosting/docker#accessing-your-edge-functions)

Edge Functions are stored in `volumes/functions`. The default setup has a `hello` Function that you can invoke on `http://<your-domain>:8000/functions/v1/hello`.

You can add new Functions as `volumes/functions/<FUNCTION_NAME>/index.ts`. Restart the `functions` service to pick up the changes: `docker compose restart functions --no-deps`

### Accessing Postgres[#](https://supabase.com/docs/guides/self-hosting/docker#accessing-postgres)

By default, the Supabase stack runs the [Supavisor](https://supabase.github.io/supavisor/development/docs/) connection pooler. Supavisor provides efficient management of database connections.

You can connect to the Postgres database using the following methods:

1. For session-based connections (equivalent to direct Postgres connections):
```
psql 'postgres://postgres.your-tenant-id:your-super-secret-and-long-postgres-password@localhost:5432/postgres'           
```

1. For pooled transactional connections:
```
1  psql 'postgres://postgres.your-tenant-id:your-super-secret-and-long-postgres-password@localhost:6543/postgres'
```

The default tenant ID is `your-tenant-id`, and the default password is `your-super-secret-and-long-postgres-password`. You should change these as soon as possible using the [instructions below](https://supabase.com/docs/guides/self-hosting/docker#update-secrets).

By default, the database is not accessible from outside the local machine but the pooler is. You can [change this](https://supabase.com/docs/guides/self-hosting/docker#exposing-your-postgres-database) by updating the `docker-compose.yml` file.

## Updating your services[#](https://supabase.com/docs/guides/self-hosting/docker#updating-your-services)

For security reasons, we "pin" the versions of each service in the docker-compose file (these versions are updated ~monthly). If you want to update any services immediately, you can do so by updating the version number in the docker compose file and then running `docker compose pull`. You can find all the latest docker images in the [Supabase Docker Hub](https://hub.docker.com/u/supabase).

You should update your services frequently to get the latest features and bug fixes and security patches. Note that you will need to restart the services to pick up the changes, which will result in some downtime for your services.

**Example** You'll want to update the Studio(Dashboard) frequently to get the latest features and bug fixes. To update the Dashboard:

1. Visit the [supabase/studio](https://hub.docker.com/r/supabase/studio/tags) image in the [Supabase Docker Hub](https://hub.docker.com/u/supabase)
2. Find the latest version (tag) number. It will look something like `20241029-46e1e40`
3. Update the `image` field in the `docker-compose.yml` file to the new version. It should look like this: `image: supabase/studio:20241028-a265374`
4. Run `docker compose pull` and then `docker compose up -d` to restart the service with the new version.

## Securing your services[#](https://supabase.com/docs/guides/self-hosting/docker#securing-your-services)

While we provided you with some example secrets for getting started, you should NEVER deploy your Supabase setup using the defaults we have provided. Follow all of the steps in this section to ensure you have a secure setup, and then [restart all services](https://supabase.com/docs/guides/self-hosting/docker#restarting-all-services) to pick up the changes.

### Generate API keys[#](https://supabase.com/docs/guides/self-hosting/docker#generate-api-keys)

We need to generate secure keys for accessing your services. We'll use the `JWT Secret` to generate `anon` and `service` API keys using the form below.

1. **Obtain a Secret**: Use the 40-character secret provided, or create your own. If creating, ensure it's a strong, random string of 40 characters.
2. **Store Securely**: Save the secret in a secure location on your local machine. Don't share this secret publicly or commit it to version control.
3. **Generate a JWT**: Use the form below to generate a new `JWT` using your secret.

JWT Secret:
```
FAKE-EXAMPLE-SECRET-12345
```

Key:
```
ANON_KEYSERVICE_KEY
```

The JWT will be generated from this info:
```
{
  "role": "INLY",
  "iss": "supabase",
  "iat": 1740344400,
  "exp": 1898110800
}
```

Token:
```
FAKE-EXAMPLE-TOKEN-12345
```
### Update API keys[#](https://supabase.com/docs/guides/self-hosting/docker#update-api-keys)

Run this form twice to generate new `anon` and `service` API keys. Replace the values in the `./docker/.env` file:

- `ANON_KEY` - replace with an `anon` key
- `SERVICE_ROLE_KEY` - replace with a `service` key

You will need to [restart](https://supabase.com/docs/guides/self-hosting/docker#restarting-all-services) the services for the changes to take effect.

### Update secrets[#](https://supabase.com/docs/guides/self-hosting/docker#update-secrets)

Update the `./docker/.env` file with your own secrets. In particular, these are required:

- `POSTGRES_PASSWORD`: the password for the `postgres` role.
- `JWT_SECRET`: used by PostgREST and GoTrue, among others.
- `SITE_URL`: the base URL of your site.
- `SMTP_*`: mail server credentials. You can use any SMTP server.
- `POOLER_TENANT_ID`: the tenant-id that will be used by Supavisor pooler for your connection string

You will need to [restart](https://supabase.com/docs/guides/self-hosting/docker#restarting-all-services) the services for the changes to take effect.

### Dashboard authentication[#](https://supabase.com/docs/guides/self-hosting/docker#dashboard-authentication)

The Dashboard is protected with basic authentication. The default user and password MUST be updated before using Supabase in production. Update the following values in the `./docker/.env` file:

- `DASHBOARD_USERNAME`: The default username for the Dashboard
- `DASHBOARD_PASSWORD`: The default password for the Dashboard

You can also add more credentials for multiple users in `./docker/volumes/api/kong.yml`. 

For example:
docker/volumes/api/kong.yml

```
basicauth_credentials:
  - consumer: DASHBOARD
    username: user_one
    password: password_one
  - consumer: DASHBOARD
    username: user_two
    password: password_two
```

You will need to [restart](https://supabase.com/docs/guides/self-hosting/docker#restarting-all-services) the services for the changes to take effect.

## Restarting all services[#](https://supabase.com/docs/guides/self-hosting/docker#restarting-all-services)

You can restart services to pick up any configuration changes by running:

```
# Stop and remove the containers
docker compose down

# Recreate and start the containers
docker compose up -d

```

Be aware that this will result in downtime. Simply restarting the services does not apply configuration changes.

## Stopping all services[#](https://supabase.com/docs/guides/self-hosting/docker#stopping-all-services)

You can stop Supabase by running `docker compose stop` in same directory as your `docker-compose.yml` file.

## Uninstalling[#](https://supabase.com/docs/guides/self-hosting/docker#uninstalling)

You can stop Supabase by running the following in same directory as your `docker-compose.yml` file:

```
# Stop docker and remove volumes:
docker compose down -v

# Remove Postgres data:
rm -rf volumes/db/data/

```

This will destroy all data in the database and storage volumes, so be careful!

## Managing your secrets[#](https://supabase.com/docs/guides/self-hosting/docker#managing-your-secrets)

Many components inside Supabase use secure secrets and passwords. These are listed in the self-hosting [env file](https://github.com/supabase/supabase/blob/master/docker/.env.example), but we strongly recommend using a secrets manager when deploying to production. Plain text files like dotenv lead to accidental costly leaks.

Some suggested systems include:

- [Doppler](https://www.doppler.com/)
- [Infisical](https://infisical.com/)
- [Key Vault](https://docs.microsoft.com/en-us/azure/key-vault/general/overview) by Azure (Microsoft)
- [Secrets Manager](https://aws.amazon.com/secrets-manager/) by AWS
- [Secrets Manager](https://cloud.google.com/secret-manager) by GCP
- [Vault](https://www.hashicorp.com/products/vault) by HashiCorp

## Advanced[#](https://supabase.com/docs/guides/self-hosting/docker#advanced)

Everything beyond this point in the guide helps you understand how the system works and how you can modify it to suit your needs.

### Architecture[#](https://supabase.com/docs/guides/self-hosting/docker#architecture)

Supabase is a combination of open source tools, each specifically chosen for Enterprise-readiness.

If the tools and communities already exist, with an MIT, Apache 2, or equivalent open license, we will use and support that tool. If the tool doesn't exist, we build and open source it ourselves.

![Diagram showing the architecture of Supabase. The Kong API gateway sits in front of 7 services: GoTrue, PostgREST, Realtime, Storage, pg_meta, Functions, and pg_graphql. All the services talk to a single Postgres instance.](https://supabase.com/docs/_next/image?url=%2Fdocs%2Fimg%2Fsupabase-architecture.svg&w=3840&q=75&dpl=dpl_81DoSFEs6kWF4DhWHkjoJLrVRJF3)

- [Kong](https://github.com/Kong/kong) is a cloud-native API gateway.
- [GoTrue](https://github.com/supabase/gotrue) is an JWT based API for managing users and issuing JWT tokens.
- [PostgREST](http://postgrest.org/) is a web server that turns your Postgres database directly into a RESTful API
- [Realtime](https://github.com/supabase/realtime) is an Elixir server that allows you to listen to Postgres inserts, updates, and deletes using WebSockets. Realtime polls Postgres' built-in replication functionality for database changes, converts changes to JSON, then broadcasts the JSON over WebSockets to authorized clients.
- [Storage](https://github.com/supabase/storage-api) provides a RESTful interface for managing Files stored in S3, using Postgres to manage permissions.
- [`postgres-meta`](https://github.com/supabase/postgres-meta) is a RESTful API for managing your Postgres, allowing you to fetch tables, add roles, and run queries, etc.
- [Postgres](https://www.postgresql.org/) is an object-relational database system with over 30 years of active development that has earned it a strong reputation for reliability, feature robustness, and performance.
- [Supavisor](https://github.com/supabase/supavisor) is a scalable connection pooler for Postgres, allowing for efficient management of database connections.

For the system to work cohesively, some services require additional configuration within the Postgres database. For example, the APIs and Auth system require several [default roles](https://supabase.com/docs/guides/database/postgres/roles) and the `pgjwt` Postgres extension.

You can find all the default extensions inside the [schema migration scripts repo](https://github.com/supabase/postgres/tree/develop/migrations). These scripts are mounted at `/docker-entrypoint-initdb.d` to run automatically when starting the database container.

### Configuring services[#](https://supabase.com/docs/guides/self-hosting/docker#configuring-services)

Each system has a number of configuration options which can be found in the relevant product documentation.

- [Postgres](https://hub.docker.com/_/postgres/)
- [PostgREST](https://postgrest.org/en/stable/configuration.html)
- [Realtime](https://github.com/supabase/realtime#server)
- [Auth](https://github.com/supabase/auth)
- [Storage](https://github.com/supabase/storage-api)
- [Kong](https://docs.konghq.com/gateway/latest/install/docker/)
- [Supavisor](https://supabase.github.io/supavisor/development/docs/)

These configuration items are generally added to the `env` section of each service, inside the `docker-compose.yml` section. If these configuration items are sensitive, they should be stored in a [secret manager](https://supabase.com/docs/guides/self-hosting#managing-your-secrets) or using an `.env` file and then referenced using the `${}` syntax.

docker-compose.yml
```
services:
  rest:
    image: postgrest/postgrest
    environment:
      PGRST_JWT_SECRET: ${JWT_SECRET}
```

.env
```
## Never check your secrets into version control
`${JWT_SECRET}`
```

### Common configuration[#](https://supabase.com/docs/guides/self-hosting/docker#common-configuration)

Each system can be [configured](https://supabase.com/docs/guides/self-hosting#configuration) independently. Some of the most common configuration options are listed below.

#### Configuring an email server[#](https://supabase.com/docs/guides/self-hosting/docker#configuring-an-email-server)

You will need to use a production-ready SMTP server for sending emails. You can configure the SMTP server by updating the following environment variables:

.env
```
SMTP_ADMIN_EMAIL=
SMTP_HOST=
SMTP_PORT=
SMTP_USER=
SMTP_PASS=
SMTP_SENDER_NAME=
```

We recommend using [AWS SES](https://aws.amazon.com/ses/). It's extremely cheap and reliable. Restart all services to pick up the new configuration.

#### Configuring S3 Storage[#](https://supabase.com/docs/guides/self-hosting/docker#configuring-s3-storage)

By default all files are stored locally on the server. You can configure the Storage service to use S3 by updating the following environment variables:

docker-compose.yml
```
storage:
  environment: STORAGE_BACKEND=s3
    GLOBAL_S3_BUCKET=name-of-your-s3-bucket
    REGION=region-of-your-s3-bucket
```

You can find all the available options in the [storage repository](https://github.com/supabase/storage-api/blob/master/.env.sample). Restart the `storage` service to pick up the changes: `docker compose restart storage --no-deps`

#### Configuring Supabase AI Assistant[#](https://supabase.com/docs/guides/self-hosting/docker#configuring-supabase-ai-assistant)

Configuring the Supabase AI Assistant is optional. By adding your own `OPENAI_API_KEY`, you can enable AI services, which help with writing SQL queries, statements, and policies.

docker-compose.yml
```
services:
  studio:
    image: supabase/studio
    environment:
      OPENAI_API_KEY: ${OPENAI_API_KEY:-}
```

.env
```
## Never check your secrets into version control
`${OPENAI_API_KEY}`
```

#### Setting database's `log_min_messages`[#](https://supabase.com/docs/guides/self-hosting/docker#setting-databases-logminmessages)

By default, `docker compose` sets the database's `log_min_messages` configuration to `fatal` to prevent redundant logs generated by Realtime. You can configure `log_min_messages` using any of the Postgres [Severity Levels](https://www.postgresql.org/docs/current/runtime-config-logging.html#RUNTIME-CONFIG-SEVERITY-LEVELS).

#### Accessing Postgres through Supavisor[#](https://supabase.com/docs/guides/self-hosting/docker#accessing-postgres-through-supavisor)

By default, the Postgres database is accessible through the Supavisor connection pooler. This allows for more efficient management of database connections. You can connect to the pooled database using the `POOLER_PROXY_PORT_TRANSACTION` port and `POSTGRES_PORT` for session based connections.

For more information on configuring and using Supavisor, see the [Supavisor documentation](https://supabase.github.io/supavisor/).

#### Exposing your Postgres database[#](https://supabase.com/docs/guides/self-hosting/docker#exposing-your-postgres-database)

If you need direct access to the Postgres database without going through Supavisor, you can expose it by updating the `docker-compose.yml` file:

docker-compose.yml

```
# Comment or remove the supavisor section of the docker-compose file
#  supavisor:
#    ports:
# ...
db:
  ports:
    - ${POSTGRES_PORT}:${POSTGRES_PORT}
```

This is less-secure, so make sure you are running a firewall in front of your server.

#### File storage backend on macOS[#](https://supabase.com/docs/guides/self-hosting/docker#file-storage-backend-on-macos)

By default, Storage backend is set to `file`, which is to use local files as the storage backend. For macOS compatibility, you need to choose `VirtioFS` as the Docker container file sharing implementation (in Docker Desktop -> Preferences -> General).

#### Setting up logging with the Analytics server[#](https://supabase.com/docs/guides/self-hosting/docker#setting-up-logging-with-the-analytics-server)

Additional configuration is required for self-hosting the Analytics server. For the full setup instructions, see [Self Hosting Analytics](https://supabase.com/docs/reference/self-hosting-analytics/introduction#getting-started).

### Upgrading Analytics[#](https://supabase.com/docs/guides/self-hosting/docker#upgrading-analytics)

Due to the changes in the Analytics server, you will need to run the following commands to upgrade your Analytics server:

All data in analytics will be deleted when you run the commands below.

```
### Destroy analytics to transition to postgres self hosted solution without other data loss

# Enter the container and use your .env POSTGRES_PASSWORD value to login
docker exec -it $(docker ps | grep supabase-db | awk '{print $1}') psql -U supabase_admin --password
# Drop all the data in the _analytics schema
DROP PUBLICATION logflare_pub; DROP SCHEMA _analytics CASCADE; CREATE SCHEMA _analytics;\q
# Drop the analytics container
docker rm supabase-analytics

```


# Auth Self-hosting Config

How to configure and deploy Supabase Auth.

In a self-hosted environment, you do not have access to the Auth configuration such as third party OAuth provider settings through the Supabase dashboard. Instead, you configure them through the `docker-compose.yml` file. You can read more about the configuration in the [Self-hosting guide](https://supabase.com/docs/guides/self-hosting/docker). You can find the complete list of available configuration parameters on the README of the [Auth repository](https://github.com/supabase/gotrue).

## General settings

- `GOTRUE_SITE_URL` **REQUIRED**  
  *no type*  
  The base URL of your website. Used as an allow-list for redirects and for constructing URLs used in emails.

- `GOTRUE_EXTERNAL_GITHUB_ENABLED`  
  *no type*  
  Whether the external provider, GitHub in this case, is enabled or not.

- `GOTRUE_EXTERNAL_GITHUB_CLIENT_ID`  
  *no type*  
  The OAuth2 Client ID registered with the external provider.

- `GOTRUE_EXTERNAL_GITHUB_SECRET`  
  *no type*  
  The OAuth2 Client Secret provided by the external provider when you registered.

- `GOTRUE_EXTERNAL_GITHUB_REDIRECT_URI`  
  *no type*  
  The URI a OAuth2 provider will redirect to with the `code` and `state` values.

- `GOTRUE_API_HOST`  
  *no type*  
  A comma separated list of URIs (e.g. `http://localhost:9999`) that the API will listen on.

- `GOTRUE_JWT_SECRET` **REQUIRED**  
  *no type*  
  The secret used to sign JWT tokens.

- `GOTRUE_DB_DATABASE_URL` **REQUIRED**  
  *no type*  
  The connection string to your Postgres database.

- `GOTRUE_DISABLE_SIGNUP`  
  *no type*  
  When set to `true`, prevents users signing up.

- `GOTRUE_JWT_EXP`  
  *no type*  
  The number of seconds until a JWT expires (defaults to `3600`).

- `GOTRUE_RATE_LIMIT_HEADER`  
  *no type*  
  Rate limit requests based on a HTTP header (defaults to `3600` requests per hour).

## GoTrue API Documentation

### Generates an email action link
`POST /admin/generate_link`

#### Body
- `data` (Optional, object)
- `email` (Optional, string) 
- `new_email` (Optional, string)
- `password` (Optional, string)
- `redirect_to` (Optional, string)
- `type` (Optional, string)

#### Response codes
- 200
- 401

#### Response (200)
exemple
```bash
{
  "action_link": "lorem",
  "app_metadata": {
    "property1": null,
    "property2": null
  },
  "aud": "lorem", 
  "banned_until": "2021-12-31T23:34:00Z",
  "confirmation_sent_at": "2021-12-31T23:34:00Z",
  "confirmed_at": "2021-12-31T23:34:00Z",
  "created_at": "2021-12-31T23:34:00Z",
  "email": "lorem",
  "email_change_sent_at": "2021-12-31T23:34:00Z",
  "email_confirmed_at": "2021-12-31T23:34:00Z",
  "email_otp": "lorem",
  "hashed_token": "lorem",
  "id": "fbdf5a53-161e-4460-98ad-0e39408d8689",
  "identities": [
    {
      "created_at": "2021-12-31T23:34:00Z",
      "id": "lorem",
      "identity_data": {
        "property1": null,
        "property2": null
      },
      "last_sign_in_at": "2021-12-31T23:34:00Z", 
      "provider": "lorem",
      "updated_at": "2021-12-31T23:34:00Z",
      "user_id": "fbdf5a53-161e-4460-98ad-0e39408d8689"
    }
  ],
  "invited_at": "2021-12-31T23:34:00Z",
  "last_sign_in_at": "2021-12-31T23:34:00Z",
  "new_email": "lorem",
  "new_phone": "lorem", 
  "phone": "lorem",
  "phone_change_sent_at": "2021-12-31T23:34:00Z",
  "phone_confirmed_at": "2021-12-31T23:34:00Z",
  "reauthentication_sent_at": "2021-12-31T23:34:00Z",
  "recovery_sent_at": "2021-12-31T23:34:00Z",
  "redirect_to": "lorem",
  "role": "lorem",
  "updated_at": "2021-12-31T23:34:00Z",
  "user_metadata": {
    "property1": null,
    "property2": null
  },
  "verification_type": "lorem"
}

```

schema
```bash
{
  "type": "object",
  "properties": {
    "action_link": {
      "type": "string",
      "x-go-name": "ActionLink"
    },
    "app_metadata": {
      "type": "object",
      "additionalProperties": {},
      "x-go-package": "github.com/netlify/gotrue/models"
    },
    "aud": {
      "type": "string",
      "x-go-name": "Aud"
    },
    "banned_until": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "BannedUntil"
    },
    "confirmation_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "ConfirmationSentAt"
    },
    "confirmed_at": {
      "description": "For backward compatibility only. Use EmailConfirmedAt or PhoneConfirmedAt instead.",
      "type": "string",
      "format": "date-time",
      "x-go-name": "ConfirmedAt"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "CreatedAt"
    },
    "email": {
      "type": "string",
      "x-go-package": "github.com/netlify/gotrue/storage"
    },
    "email_change_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "EmailChangeSentAt"
    },
    "email_confirmed_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "EmailConfirmedAt"
    },
    "email_otp": {
      "type": "string",
      "x-go-name": "EmailOtp"
    },
    "hashed_token": {
      "type": "string",
      "x-go-name": "HashedToken"
    },
    "id": {
      "type": "string",
      "format": "uuid",
      "x-go-name": "ID"
    },
    "identities": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "created_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "CreatedAt"
          },
          "id": {
            "type": "string",
            "x-go-name": "ID"
          },
          "identity_data": {
            "type": "object",
            "additionalProperties": {},
            "x-go-package": "github.com/netlify/gotrue/models"
          },
          "last_sign_in_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "LastSignInAt"
          },
          "provider": {
            "type": "string",
            "x-go-name": "Provider"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "UpdatedAt"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "x-go-name": "UserID"
          }
        },
        "x-go-package": "github.com/netlify/gotrue/models"
      },
      "x-go-name": "Identities"
    },
    "invited_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "InvitedAt"
    },
    "last_sign_in_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "LastSignInAt"
    },
    "new_email": {
      "type": "string",
      "x-go-name": "EmailChange"
    },
    "new_phone": {
      "type": "string",
      "x-go-name": "PhoneChange"
    },
    "phone": {
      "type": "string",
      "x-go-package": "github.com/netlify/gotrue/storage"
    },
    "phone_change_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "PhoneChangeSentAt"
    },
    "phone_confirmed_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "PhoneConfirmedAt"
    },
    "reauthentication_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "ReauthenticationSentAt"
    },
    "recovery_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "RecoverySentAt"
    },
    "redirect_to": {
      "type": "string",
      "x-go-name": "RedirectTo"
    },
    "role": {
      "type": "string",
      "x-go-name": "Role"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "UpdatedAt"
    },
    "user_metadata": {
      "type": "object",
      "additionalProperties": {},
      "x-go-package": "github.com/netlify/gotrue/models"
    },
    "verification_type": {
      "type": "string",
      "x-go-name": "VerificationType"
    }
  },
  "x-go-package": "github.com/netlify/gotrue/api"
}
```

### Get a user
`GET /admin/user/{user_id}`

#### Path parameters
- `user_id` (Required) - The user's id

#### Response codes
- 200
- 401

#### Response (200)
exemple
```bash
{
  "app_metadata": {
    "property1": null,
    "property2": null
  },
  "aud": "lorem",
  "banned_until": "2021-12-31T23:34:00Z",
  "confirmation_sent_at": "2021-12-31T23:34:00Z",
  "confirmed_at": "2021-12-31T23:34:00Z",
  "created_at": "2021-12-31T23:34:00Z",
  "email": "lorem",
  "email_change_sent_at": "2021-12-31T23:34:00Z",
  "email_confirmed_at": "2021-12-31T23:34:00Z",
  "id": "fbdf5a53-161e-4460-98ad-0e39408d8689",
  "identities": [
    {
      "created_at": "2021-12-31T23:34:00Z",
      "id": "lorem",
      "identity_data": {
        "property1": null,
        "property2": null
      },
      "last_sign_in_at": "2021-12-31T23:34:00Z",
      "provider": "lorem", 
      "updated_at": "2021-12-31T23:34:00Z",
      "user_id": "fbdf5a53-161e-4460-98ad-0e39408d8689"
    }
  ],
  "invited_at": "2021-12-31T23:34:00Z",
  "last_sign_in_at": "2021-12-31T23:34:00Z",
  "new_email": "lorem",
  "new_phone": "lorem",
  "phone": "lorem",
  "phone_change_sent_at": "2021-12-31T23:34:00Z",
  "phone_confirmed_at": "2021-12-31T23:34:00Z",
  "reauthentication_sent_at": "2021-12-31T23:34:00Z",
  "recovery_sent_at": "2021-12-31T23:34:00Z",
  "role": "lorem",
  "updated_at": "2021-12-31T23:34:00Z",
  "user_metadata": {
    "property1": null,
    "property2": null
  }
}
```

schema
```bash
{
  "description": "User respresents a registered user with email/password authentication",
  "type": "object",
  "properties": {
    "app_metadata": {
      "type": "object",
      "additionalProperties": {},
      "x-go-package": "github.com/netlify/gotrue/models"
    },
    "aud": {
      "type": "string",
      "x-go-name": "Aud"
    },
    "banned_until": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "BannedUntil"
    },
    "confirmation_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "ConfirmationSentAt"
    },
    "confirmed_at": {
      "description": "For backward compatibility only. Use EmailConfirmedAt or PhoneConfirmedAt instead.",
      "type": "string",
      "format": "date-time",
      "x-go-name": "ConfirmedAt"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "CreatedAt"
    },
    "email": {
      "type": "string",
      "x-go-package": "github.com/netlify/gotrue/storage"
    },
    "email_change_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "EmailChangeSentAt"
    },
    "email_confirmed_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "EmailConfirmedAt"
    },
    "id": {
      "type": "string",
      "format": "uuid",
      "x-go-name": "ID"
    },
    "identities": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "created_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "CreatedAt"
          },
          "id": {
            "type": "string",
            "x-go-name": "ID"
          },
          "identity_data": {
            "type": "object",
            "additionalProperties": {},
            "x-go-package": "github.com/netlify/gotrue/models"
          },
          "last_sign_in_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "LastSignInAt"
          },
          "provider": {
            "type": "string",
            "x-go-name": "Provider"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "UpdatedAt"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "x-go-name": "UserID"
          }
        },
        "x-go-package": "github.com/netlify/gotrue/models"
      },
      "x-go-name": "Identities"
    },
    "invited_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "InvitedAt"
    },
    "last_sign_in_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "LastSignInAt"
    },
    "new_email": {
      "type": "string",
      "x-go-name": "EmailChange"
    },
    "new_phone": {
      "type": "string",
      "x-go-name": "PhoneChange"
    },
    "phone": {
      "type": "string",
      "x-go-package": "github.com/netlify/gotrue/storage"
    },
    "phone_change_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "PhoneChangeSentAt"
    },
    "phone_confirmed_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "PhoneConfirmedAt"
    },
    "reauthentication_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "ReauthenticationSentAt"
    },
    "recovery_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "RecoverySentAt"
    },
    "role": {
      "type": "string",
      "x-go-name": "Role"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "UpdatedAt"
    },
    "user_metadata": {
      "type": "object",
      "additionalProperties": {},
      "x-go-package": "github.com/netlify/gotrue/models"
    }
  },
  "x-go-package": "github.com/netlify/gotrue/models"
}
```

### Update a user
`PUT /admin/user/{user_id}`

#### Path parameters
- `user_id` (Required) - The user's id

#### Response codes
- 200
- 401

#### Response (200)
exemple
```bash
{
  "app_metadata": {
    "property1": null,
    "property2": null
  },
  "aud": "lorem",
  "banned_until": "2021-12-31T23:34:00Z",
  "confirmation_sent_at": "2021-12-31T23:34:00Z",
  "confirmed_at": "2021-12-31T23:34:00Z",
  "created_at": "2021-12-31T23:34:00Z",
  "email": "lorem",
  "email_change_sent_at": "2021-12-31T23:34:00Z",
  "email_confirmed_at": "2021-12-31T23:34:00Z",
  "id": "fbdf5a53-161e-4460-98ad-0e39408d8689",
  "identities": [
    {
      "created_at": "2021-12-31T23:34:00Z",
      "id": "lorem",
      "identity_data": {
        "property1": null,
        "property2": null
      },
      "last_sign_in_at": "2021-12-31T23:34:00Z",
      "provider": "lorem",
      "updated_at": "2021-12-31T23:34:00Z",
      "user_id": "fbdf5a53-161e-4460-98ad-0e39408d8689"
    }
  ],
  "invited_at": "2021-12-31T23:34:00Z",
  "last_sign_in_at": "2021-12-31T23:34:00Z",
  "new_email": "lorem",
  "new_phone": "lorem",
  "phone": "lorem",
  "phone_change_sent_at": "2021-12-31T23:34:00Z",
  "phone_confirmed_at": "2021-12-31T23:34:00Z",
  "reauthentication_sent_at": "2021-12-31T23:34:00Z",
  "recovery_sent_at": "2021-12-31T23:34:00Z",
  "role": "lorem",
  "updated_at": "2021-12-31T23:34:00Z",
  "user_metadata": {
    "property1": null,
    "property2": null
  }
}
```

schema
```bash
{
  "description": "User respresents a registered user with email/password authentication",
  "type": "object",
  "properties": {
    "app_metadata": {
      "type": "object",
      "additionalProperties": {},
      "x-go-package": "github.com/netlify/gotrue/models"
    },
    "aud": {
      "type": "string",
      "x-go-name": "Aud"
    },
    "banned_until": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "BannedUntil"
    },
    "confirmation_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "ConfirmationSentAt"
    },
    "confirmed_at": {
      "description": "For backward compatibility only. Use EmailConfirmedAt or PhoneConfirmedAt instead.",
      "type": "string",
      "format": "date-time",
      "x-go-name": "ConfirmedAt"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "CreatedAt"
    },
    "email": {
      "type": "string",
      "x-go-package": "github.com/netlify/gotrue/storage"
    },
    "email_change_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "EmailChangeSentAt"
    },
    "email_confirmed_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "EmailConfirmedAt"
    },
    "id": {
      "type": "string",
      "format": "uuid",
      "x-go-name": "ID"
    },
    "identities": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "created_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "CreatedAt"
          },
          "id": {
            "type": "string",
            "x-go-name": "ID"
          },
          "identity_data": {
            "type": "object",
            "additionalProperties": {},
            "x-go-package": "github.com/netlify/gotrue/models"
          },
          "last_sign_in_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "LastSignInAt"
          },
          "provider": {
            "type": "string",
            "x-go-name": "Provider"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "UpdatedAt"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "x-go-name": "UserID"
          }
        },
        "x-go-package": "github.com/netlify/gotrue/models"
      },
      "x-go-name": "Identities"
    },
    "invited_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "InvitedAt"
    },
    "last_sign_in_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "LastSignInAt"
    },
    "new_email": {
      "type": "string",
      "x-go-name": "EmailChange"
    },
    "new_phone": {
      "type": "string",
      "x-go-name": "PhoneChange"
    },
    "phone": {
      "type": "string",
      "x-go-package": "github.com/netlify/gotrue/storage"
    },
    "phone_change_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "PhoneChangeSentAt"
    },
    "phone_confirmed_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "PhoneConfirmedAt"
    },
    "reauthentication_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "ReauthenticationSentAt"
    },
    "recovery_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "RecoverySentAt"
    },
    "role": {
      "type": "string",
      "x-go-name": "Role"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "UpdatedAt"
    },
    "user_metadata": {
      "type": "object",
      "additionalProperties": {},
      "x-go-package": "github.com/netlify/gotrue/models"
    }
  },
  "x-go-package": "github.com/netlify/gotrue/models"
}
```


### Deletes a user
`DELETE /admin/user/{user_id}`

#### Path parameters
- `user_id` (Required) - The user's id

#### Response codes
- 200
- 401

#### Response (200)

___

### List all users
`GET /admin/users`

#### Response codes
- 200
- 401

#### Response (200)
exemple
```bash
{
  "aud": "lorem",
  "users": [
    {
      "app_metadata": {
        "property1": null,
        "property2": null
      },
      "aud": "lorem",
      "banned_until": "2021-12-31T23:34:00Z",
      "confirmation_sent_at": "2021-12-31T23:34:00Z",
      "confirmed_at": "2021-12-31T23:34:00Z",
      "created_at": "2021-12-31T23:34:00Z",
      "email": "lorem",
      "email_change_sent_at": "2021-12-31T23:34:00Z",
      "email_confirmed_at": "2021-12-31T23:34:00Z",
      "id": "fbdf5a53-161e-4460-98ad-0e39408d8689",
      "identities": [
        {
          "created_at": "2021-12-31T23:34:00Z",
          "id": "lorem",
          "identity_data": {
            "property1": null,
            "property2": null
          },
          "last_sign_in_at": "2021-12-31T23:34:00Z",
          "provider": "lorem",
          "updated_at": "2021-12-31T23:34:00Z",
          "user_id": "fbdf5a53-161e-4460-98ad-0e39408d8689"
        }
      ],
      "invited_at": "2021-12-31T23:34:00Z",
      "last_sign_in_at": "2021-12-31T23:34:00Z",
      "new_email": "lorem",
      "new_phone": "lorem",
      "phone": "lorem",
      "phone_change_sent_at": "2021-12-31T23:34:00Z",
      "phone_confirmed_at": "2021-12-31T23:34:00Z",
      "reauthentication_sent_at": "2021-12-31T23:34:00Z",
      "recovery_sent_at": "2021-12-31T23:34:00Z",
      "role": "lorem",
      "updated_at": "2021-12-31T23:34:00Z",
      "user_metadata": {
        "property1": null,
        "property2": null
      }
    }
  ]
}
```

schema
```bash
{
  "type": "object",
  "properties": {
    "aud": {
      "type": "string",
      "x-go-name": "Aud"
    },
    "users": {
      "type": "array",
      "items": {
        "description": "User respresents a registered user with email/password authentication",
        "type": "object",
        "properties": {
          "app_metadata": {
            "type": "object",
            "additionalProperties": {},
            "x-go-package": "github.com/netlify/gotrue/models"
          },
          "aud": {
            "type": "string",
            "x-go-name": "Aud"
          },
          "banned_until": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "BannedUntil"
          },
          "confirmation_sent_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "ConfirmationSentAt"
          },
          "confirmed_at": {
            "description": "For backward compatibility only. Use EmailConfirmedAt or PhoneConfirmedAt instead.",
            "type": "string",
            "format": "date-time",
            "x-go-name": "ConfirmedAt"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "CreatedAt"
          },
          "email": {
            "type": "string",
            "x-go-package": "github.com/netlify/gotrue/storage"
          },
          "email_change_sent_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "EmailChangeSentAt"
          },
          "email_confirmed_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "EmailConfirmedAt"
          },
          "id": {
            "type": "string",
            "format": "uuid",
            "x-go-name": "ID"
          },
          "identities": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "created_at": {
                  "type": "string",
                  "format": "date-time",
                  "x-go-name": "CreatedAt"
                },
                "id": {
                  "type": "string",
                  "x-go-name": "ID"
                },
                "identity_data": {
                  "type": "object",
                  "additionalProperties": {},
                  "x-go-package": "github.com/netlify/gotrue/models"
                },
                "last_sign_in_at": {
                  "type": "string",
                  "format": "date-time",
                  "x-go-name": "LastSignInAt"
                },
                "provider": {
                  "type": "string",
                  "x-go-name": "Provider"
                },
                "updated_at": {
                  "type": "string",
                  "format": "date-time",
                  "x-go-name": "UpdatedAt"
                },
                "user_id": {
                  "type": "string",
                  "format": "uuid",
                  "x-go-name": "UserID"
                }
              },
              "x-go-package": "github.com/netlify/gotrue/models"
            },
            "x-go-name": "Identities"
          }
        }
      }
    }
  }
}
```

### Returns the created user
`POST /admin/users`

#### Body
- `app_metadata` (Optional, object)
- `aud` (Optional, string)
- `ban_duration` (Optional, string)
- `email` (Optional, string)
- `email_confirm` (Optional, boolean)
- `password` (Optional, string)
- `phone` (Optional, string)
- `phone_confirm` (Optional, boolean)
- `role` (Optional, string)
- `user_metadata` (Optional, object)

#### Response codes
- 200
- 401

#### Response (200)
exemple
```bash
{
  "app_metadata": {
    "property1": null,
    "property2": null
  },
  "aud": "lorem",
  "banned_until": "2021-12-31T23:34:00Z",
  "confirmation_sent_at": "2021-12-31T23:34:00Z",
  "confirmed_at": "2021-12-31T23:34:00Z",
  "created_at": "2021-12-31T23:34:00Z",
  "email": "lorem",
  "email_change_sent_at": "2021-12-31T23:34:00Z",
  "email_confirmed_at": "2021-12-31T23:34:00Z",
  "id": "fbdf5a53-161e-4460-98ad-0e39408d8689",
  "identities": [
    {
      "created_at": "2021-12-31T23:34:00Z",
      "id": "lorem",
      "identity_data": {
        "property1": null,
        "property2": null
      },
      "last_sign_in_at": "2021-12-31T23:34:00Z",
      "provider": "lorem",
      "updated_at": "2021-12-31T23:34:00Z",
      "user_id": "fbdf5a53-161e-4460-98ad-0e39408d8689"
    }
  ],
  "invited_at": "2021-12-31T23:34:00Z",
  "last_sign_in_at": "2021-12-31T23:34:00Z",
  "new_email": "lorem",
  "new_phone": "lorem",
  "phone": "lorem",
  "phone_change_sent_at": "2021-12-31T23:34:00Z",
  "phone_confirmed_at": "2021-12-31T23:34:00Z",
  "reauthentication_sent_at": "2021-12-31T23:34:00Z",
  "recovery_sent_at": "2021-12-31T23:34:00Z",
  "role": "lorem",
  "updated_at": "2021-12-31T23:34:00Z",
  "user_metadata": {
    "property1": null,
    "property2": null
  }
}
```

schema
```bash
{
  "description": "User respresents a registered user with email/password authentication",
  "type": "object",
  "properties": {
    "app_metadata": {
      "type": "object",
      "additionalProperties": {},
      "x-go-package": "github.com/netlify/gotrue/models"
    },
    "aud": {
      "type": "string",
      "x-go-name": "Aud"
    },
    "banned_until": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "BannedUntil"
    },
    "confirmation_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "ConfirmationSentAt"
    },
    "confirmed_at": {
      "description": "For backward compatibility only. Use EmailConfirmedAt or PhoneConfirmedAt instead.",
      "type": "string",
      "format": "date-time",
      "x-go-name": "ConfirmedAt"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "CreatedAt"
    },
    "email": {
      "type": "string",
      "x-go-package": "github.com/netlify/gotrue/storage"
    },
    "email_change_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "EmailChangeSentAt"
    },
    "email_confirmed_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "EmailConfirmedAt"
    },
    "id": {
      "type": "string",
      "format": "uuid",
      "x-go-name": "ID"
    },
    "identities": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "created_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "CreatedAt"
          },
          "id": {
            "type": "string",
            "x-go-name": "ID"
          },
          "identity_data": {
            "type": "object",
            "additionalProperties": {},
            "x-go-package": "github.com/netlify/gotrue/models"
          },
          "last_sign_in_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "LastSignInAt"
          },
          "provider": {
            "type": "string",
            "x-go-name": "Provider"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "UpdatedAt"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "x-go-name": "UserID"
          }
        },
        "x-go-package": "github.com/netlify/gotrue/models"
      },
      "x-go-name": "Identities"
    }
  }
}
```

### Receives the redirect from an external provider
`GET /callback`

#### Response codes
- 302

___

### The healthcheck endpoint for gotrue
`GET /health`

#### Response codes
- 200

#### Response (200)
exemple
```bash
{
  "description": "lorem",
  "name": "lorem",
  "version": "lorem"
}

```

schema
```bash
{
  "type": "object",
  "properties": {
    "description": {
      "type": "string",
      "x-go-name": "Description"
    },
    "name": {
      "type": "string",
      "x-go-name": "Name"
    },
    "version": {
      "type": "string",
      "x-go-name": "Version"
    }
  },
  "x-go-package": "github.com/netlify/gotrue/api"
}
```

___

### Sends an invite link to the user
`POST /invite`

#### Body
- `data` (Optional, object)
- `email` (Optional, string)

#### Response codes
- 200

#### Response (200)

___

### Logs out the user
`POST /logout`

#### Response codes
- 204

#### Response (204)

___

### Passwordless sign-in method for email or phone
`POST /otp`

#### Body
- `create_user` (Optional, boolean)
- `data` (Optional, object)
- `email` (Optional, string)
- `phone` (Optional, string)

#### Response codes
- 200

#### Response (200)

___

### Sends a password recovery email link to the user's email
`POST /recover`

#### Body
- `email` (Optional, string)

#### Response codes
- 200

#### Response (200)

___

### Returns the configuration settings for the gotrue server
`GET /settings`

#### Response codes
- 200

#### Response (200)
exemple
```bash
{
  "disable_signup": true,
  "external": {
    "apple": true,
    "azure": true,
    "bitbucket": true,
    "discord": true,
    "email": true,
    "facebook": true,
    "github": true,
    "gitlab": true,
    "google": true,
    "keycloak": true,
    "linkedin": true,
    "notion": true,
    "phone": true,
    "saml": true,
    "slack": true,
    "spotify": true,
    "twitch": true,
    "twitter": true,
    "workos": true,
    "zoom": true
  },
  "mailer_autoconfirm": true,
  "phone_autoconfirm": true,
  "sms_provider": "lorem"
}

```

schema
```bash
{
  "type": "object",
  "properties": {
    "disable_signup": {
      "type": "boolean",
      "x-go-name": "DisableSignup"
    },
    "external": {
      "type": "object",
      "properties": {
        "apple": {
          "type": "boolean",
          "x-go-name": "Apple"
        },
        "azure": {
          "type": "boolean",
          "x-go-name": "Azure"
        },
        "bitbucket": {
          "type": "boolean",
          "x-go-name": "Bitbucket"
        },
        "discord": {
          "type": "boolean",
          "x-go-name": "Discord"
        },
        "email": {
          "type": "boolean",
          "x-go-name": "Email"
        },
        "facebook": {
          "type": "boolean",
          "x-go-name": "Facebook"
        },
        "github": {
          "type": "boolean",
          "x-go-name": "GitHub"
        },
        "gitlab": {
          "type": "boolean",
          "x-go-name": "GitLab"
        },
        "google": {
          "type": "boolean",
          "x-go-name": "Google"
        },
        "keycloak": {
          "type": "boolean",
          "x-go-name": "Keycloak"
        },
        "linkedin": {
          "type": "boolean",
          "x-go-name": "Linkedin"
        },
        "notion": {
          "type": "boolean",
          "x-go-name": "Notion"
        },
        "phone": {
          "type": "boolean",
          "x-go-name": "Phone"
        },
        "saml": {
          "type": "boolean",
          "x-go-name": "SAML"
        },
        "slack": {
          "type": "boolean",
          "x-go-name": "Slack"
        },
        "spotify": {
          "type": "boolean",
          "x-go-name": "Spotify"
        },
        "twitch": {
          "type": "boolean",
          "x-go-name": "Twitch"
        },
        "twitter": {
          "type": "boolean",
          "x-go-name": "Twitter"
        },
        "workos": {
          "type": "boolean",
          "x-go-name": "WorkOS"
        },
        "zoom": {
          "type": "boolean",
          "x-go-name": "Zoom"
        }
      },
      "x-go-package": "github.com/netlify/gotrue/api"
    },
    "mailer_autoconfirm": {
      "type": "boolean",
      "x-go-name": "MailerAutoconfirm"
    },
    "phone_autoconfirm": {
      "type": "boolean",
      "x-go-name": "PhoneAutoconfirm"
    },
    "sms_provider": {
      "type": "string",
      "x-go-name": "SmsProvider"
    }
  },
  "x-go-package": "github.com/netlify/gotrue/api"
}
```

### Password-based signup with either email or phone
`POST /signup`

#### Body
- `data` (Optional, object)
- `email` (Optional, string)
- `password` (Optional, string)
- `phone` (Optional, string)

#### Response codes
- 200

#### Response (200)
exemple
```bash
{
  "app_metadata": {
    "property1": null,
    "property2": null
  },
  "aud": "lorem",
  "banned_until": "2021-12-31T23:34:00Z",
  "confirmation_sent_at": "2021-12-31T23:34:00Z",
  "confirmed_at": "2021-12-31T23:34:00Z",
  "created_at": "2021-12-31T23:34:00Z",
  "email": "lorem",
  "email_change_sent_at": "2021-12-31T23:34:00Z",
  "email_confirmed_at": "2021-12-31T23:34:00Z",
  "id": "fbdf5a53-161e-4460-98ad-0e39408d8689",
  "identities": [
    {
      "created_at": "2021-12-31T23:34:00Z",
      "id": "lorem",
      "identity_data": {
        "property1": null,
        "property2": null
      },
      "last_sign_in_at": "2021-12-31T23:34:00Z",
      "provider": "lorem",
      "updated_at": "2021-12-31T23:34:00Z",
      "user_id": "fbdf5a53-161e-4460-98ad-0e39408d8689"
    }
  ],
  "invited_at": "2021-12-31T23:34:00Z",
  "last_sign_in_at": "2021-12-31T23:34:00Z",
  "new_email": "lorem",
  "new_phone": "lorem",
  "phone": "lorem",
  "phone_change_sent_at": "2021-12-31T23:34:00Z",
  "phone_confirmed_at": "2021-12-31T23:34:00Z",
  "reauthentication_sent_at": "2021-12-31T23:34:00Z",
  "recovery_sent_at": "2021-12-31T23:34:00Z",
  "role": "lorem",
  "updated_at": "2021-12-31T23:34:00Z",
  "user_metadata": {
    "property1": null,
    "property2": null
  }
}
```

schema
```bash
{
  "description": "User respresents a registered user with email/password authentication",
  "type": "object",
  "properties": {
    "app_metadata": {
      "type": "object",
      "additionalProperties": {},
      "x-go-package": "github.com/netlify/gotrue/models"
    },
    "aud": {
      "type": "string",
      "x-go-name": "Aud"
    },
    "banned_until": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "BannedUntil"
    },
    "confirmation_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "ConfirmationSentAt"
    },
    "confirmed_at": {
      "description": "For backward compatibility only. Use EmailConfirmedAt or PhoneConfirmedAt instead.",
      "type": "string",
      "format": "date-time",
      "x-go-name": "ConfirmedAt"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "CreatedAt"
    },
    "email": {
      "type": "string",
      "x-go-package": "github.com/netlify/gotrue/storage"
    },
    "email_change_sent_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "EmailChangeSentAt"
    },
    "email_confirmed_at": {
      "type": "string",
      "format": "date-time",
      "x-go-name": "EmailConfirmedAt"
    },
    "id": {
      "type": "string",
      "format": "uuid",
      "x-go-name": "ID"
    },
    "identities": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "created_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "CreatedAt"
          },
          "id": {
            "type": "string",
            "x-go-name": "ID"
          },
          "identity_data": {
            "type": "object",
            "additionalProperties": {},
            "x-go-package": "github.com/netlify/gotrue/models"
          },
          "last_sign_in_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "LastSignInAt"
          },
          "provider": {
            "type": "string",
            "x-go-name": "Provider"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "x-go-name": "UpdatedAt"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "x-go-name": "UserID"
          }
        },
        "x-go-package": "github.com/netlify/gotrue/models"
      },
      "x-go-name": "Identities"
    }
  }
}
```

### Signs in a user with a password

POST /token?grant_type=password

#### Body
- email (Optional, string)
- password (Optional, string)
- phone (Optional, string)

#### Response codes
- 200

#### Response (200)
exemple
```bash
{
  "app_metadata": {
    "property1": null,
    "property2": null
  },
  "aud": "lorem",
  "banned_until": "2021-12-31T23:34:00Z",
  "confirmation_sent_at": "2021-12-31T23:34:00Z",
  "confirmed_at": "2021-12-31T23:34:00Z",
  "created_at": "2021-12-31T23:34:00Z",
  "email": "lorem",
  "email_change_sent_at": "2021-12-31T23:34:00Z",
  "email_confirmed_at": "2021-12-31T23:34:00Z",
  "id": "fbdf5a53-161e-4460-98ad-0e39408d8689",
  "identities": [
    {
      "created_at": "2021-12-31T23:34:00Z",
      "id": "lorem",
      "identity_data": {
        "property1": null,
        "property2": null
      },
      "last_sign_in_at": "2021-12-31T23:34:00Z",
      "provider": "lorem",
      "updated_at": "2021-12-31T23:34:00Z",
      "user_id": "fbdf5a53-161e-4460-98ad-0e39408d8689"
    }
  ],
  "invited_at": "2021-12-31T23:34:00Z",
  "last_sign_in_at": "2021-12-31T23:34:00Z",
  "new_email": "lorem",
  "new_phone": "lorem",
  "phone": "lorem",
  "phone_change_sent_at": "2021-12-31T23:34:00Z",
  "phone_confirmed_at": "2021-12-31T23:34:00Z",
  "reauthentication_sent_at": "2021-12-31T23:34:00Z",
  "recovery_sent_at": "2021-12-31T23:34:00Z",
  "role": "lorem",
  "updated_at": "2021-12-31T23:34:00Z",
  "user_metadata": {
    "property1": null,
    "property2": null
  }
}
```

schema
```bash
{
  "description": "AccessTokenResponse represents an OAuth2 success response",
  "type": "object",
  "properties": {
    "access_token": {
      "type": "string",
      "x-go-name": "Token"
    },
    "expires_in": {
      "type": "integer",
      "format": "int64",
      "x-go-name": "ExpiresIn"
    },
    "refresh_token": {
      "type": "string",
      "x-go-name": "RefreshToken"
    },
    "token_type": {
      "type": "string",
      "x-go-name": "TokenType"
    },
    "user": {
      "description": "User respresents a registered user with email/password authentication",
      "type": "object",
      "properties": {
        "app_metadata": {
          "type": "object",
          "additionalProperties": {},
          "x-go-package": "github.com/netlify/gotrue/models"
        },
        "aud": {
          "type": "string",
          "x-go-name": "Aud"
        },
        "banned_until": {
          "type": "string",
          "format": "date-time",
          "x-go-name": "BannedUntil"
        },
        "confirmation_sent_at": {
          "type": "string",
          "format": "date-time",
          "x-go-name": "ConfirmationSentAt"
        },
        "confirmed_at": {
          "description": "For backward compatibility only. Use EmailConfirmedAt or PhoneConfirmedAt instead.",
          "type": "string",
          "format": "date-time",
          "x-go-name": "ConfirmedAt"
        },
        "created_at": {
          "type": "string",
          "format": "date-time",
          "x-go-name": "CreatedAt"
        },
        "email": {
          "type": "string",
          "x-go-package": "github.com/netlify/gotrue/storage"
        },
        "email_change_sent_at": {
          "type": "string",
          "format": "date-time",
          "x-go-name": "EmailChangeSentAt"
        },
        "email_confirmed_at": {
          "type": "string",
          "format": "date-time",
          "x-go-name": "EmailConfirmedAt"
        },
        "id": {
          "type": "string",
          "format": "uuid",
          "x-go-name": "ID"
        },
        "identities": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "created_at": {
                "type": "string",
                "format": "date-time",
                "x-go-name": "CreatedAt"
              },
              "id": {
                "type": "string",
                "x-go-name": "ID"
              },
              "identity_data": {
                "type": "object",
                "additionalProperties": {},
                "x-go-package": "github.com/netlify/gotrue/models"
              },
              "last_sign_in_at": {
                "type": "string",
                "format": "date-time",
                "x-go-name": "LastSignInAt"
              },
              "provider": {
                "type": "string",
                "x-go-name": "Provider"
              },
              "updated_at": {
                "type": "string",
                "format": "date-time",
                "x-go-name": "UpdatedAt"
              },
              "user_id": {
                "type": "string",
                "format": "uuid",
                "x-go-name": "UserID"
              }
            },
            "x-go-package": "github.com/netlify/gotrue/models"
          },
          "x-go-name": "Identities"
        },
        "invited_at": {
          "type": "string",
          "format": "date-time",
          "x-go-name": "InvitedAt"
        },
        "last_sign_in_at": {
          "type": "string",
          "format": "date-time",
          "x-go-name": "LastSignInAt"
        },
        "new_email": {
          "type": "string",
          "x-go-name": "EmailChange"
        },
        "new_phone": {
          "type": "string",
          "x-go-name": "PhoneChange"
        },
        "phone": {
          "type": "string",
          "x-go-package": "github.com/netlify/gotrue/storage"
        },
        "phone_change_sent_at": {
          "type": "string",
          "format": "date-time",
          "x-go-name": "PhoneChangeSentAt"
        },
        "phone_confirmed_at": {
          "type": "string",
          "format": "date-time",
          "x-go-name": "PhoneConfirmedAt"
        },
        "reauthentication_sent_at": {
          "type": "string",
          "format": "date-time",
          "x-go-name": "ReauthenticationSentAt"
        },
        "recovery_sent_at": {
          "type": "string",
          "format": "date-time",
          "x-go-name": "RecoverySentAt"
        },
        "role": {
          "type": "string",
          "x-go-name": "Role"
        },
        "updated_at": {
          "type": "string",
          "format": "date-time",
          "x-go-name": "UpdatedAt"
        },
        "user_metadata": {
          "type": "object",
          "additionalProperties": {},
          "x-go-package": "github.com/netlify/gotrue/models"
        }
      },
      "x-go-package": "github.com/netlify/gotrue/models"
    }
  },
  "x-go-package": "github.com/netlify/gotrue/api"
}
```



### Verifies a sign up
`POST /verify`

#### Body
- `email` (Optional, string)
- `phone` (Optional, string)
- `redirect_to` (Optional, string)
- `token` (Optional, string)
- `type` (Optional, string)

# Storage Self-hosting Config

How to configure and deploy Supabase Storage.

A sample `.env` file is located in the [storage repository](https://github.com/supabase/storage/blob/master/.env.example). Use this file to configure your environment variables for your Storage server.

- `ANON_KEY` **REQUIRED**  
  *no type*  
  A long-lived JWT with anonymous Postgres privileges.

- `SERVICE_KEY` **REQUIRED**  
  *no type*  
  A long-lived JWT with Postgres privileges to bypass Row Level Security.

- `TENANT_ID` **REQUIRED**  
  *no type*  
  The ID of a Storage tenant.

- `REGION` **REQUIRED**  
  *no type*  
  Region of your S3 bucket.

- `GLOBAL_S3_BUCKET` **REQUIRED**  
  *no type*  
  Name of your S3 bucket.

- `POSTGREST_URL` **REQUIRED**  
  *no type*  
  The URL of your PostgREST server.

- `POSTGREST_JWT` **REQUIRED**  
  *no type*  
  A JWT Secret for the PostgREST database.

- `DATABASE_URL` **REQUIRED**  
  *no type*  
  The URL of your Postgres database.

- `PGOPTIONS`  
  *no type*  
  Additional configuration parameters for Postgres startup.

- `FILE_SIZE_LIMIT`  
  *no type*  
  The maximum file size allowed.

- `STORAGE_BACKEND`  
  *no type*  
  The storage provider.

- `FILE_STORAGE_BACKEND_PATH`  
  *no type*  
  The location storage when the "STORAGE_BACKEND" is set to "file".

Configuration items for multi-tenant servers.

- `MULTI_TENANT_DATABASE_URL`  
  *no type*  
  The URL of the multitenant Postgres database.

- `MULTI_TENANT_POSTGREST_SUFFIX`  
  *no type*  
  The suffix for the PostgREST instance.

- `MULTI_TENANT_ADMIN_API_KEY`  
  *no type*  
  Secure API key for administrative endpoints.

## Operate across multiple tenants

See the [multi-tenant example](https://github.com/supabase/storage/tree/master/examples/multi-tenant) for more details.


# Realtime Self-hosting Config

How to configure and deploy Supabase Realtime.

You can use Environment Variables to configure your Realtime Server. See [this guide](https://supabase.com/docs/guides/database/realtime/setup) if you want to configure your database to work with Realtime.

## General server settings

- `DB_HOST` **REQUIRED**  
  *no type*  
  Database host address.

- `DB_PORT` **REQUIRED**  
  *no type*  
  Database port number.

- `DB_NAME` **REQUIRED**  
  *no type*  
  Database name.

- `DB_USER` **REQUIRED**  
  *no type*  
  Database username.

- `DB_PASSWORD` **REQUIRED**  
  *no type*  
  Database password.

- `DB_SSL`  
  *no type*  
  Connect to database with SSL enabled.

- `DB_IP_VERSION`  
  *no type*  
  Connect to database via either IPv4 or IPv6. Disregarded if database host is an IP address (e.g. `127.0.0.1`) and recommended if database host is a name (e.g. `db.abcd.supabase.co`) to prevent potential non-existent domain (NXDOMAIN) errors.

- `SLOT_NAME`  
  *no type*  
  A unique name for Postgres to track the Write-Ahead Logging (WAL). If the Realtime server dies then this slot can keep the changes since the last committed position.

- `PUBLICATION`  
  *no type*  
  JSON encoded array of publication names. Realtime RLS currently accepts one publication.

- `SECURE_CHANNELS`  
  *no type*  
  When set to `true`, requires clients to send a JWT in their WebSocket connection params.

- `JWT_SECRET` **REQUIRED**  
  *no type*  
  The secret used to decode client JWTs when `SECURE_CHANNELS` is enabled.

- `EVENTS_PER_SECOND`  
  *no type*  
  The number of events sent to clients per second (defaults to `100`).

- `MAX_CONNECTIONS`  
  *no type*  
  The maximum number of concurrent client connections (defaults to `1000`).


# Analytics Self-hosting Config

How to configure and deploy Supabase Analytics.

You can use environment variables to configure your Analytics Server.

## General server settings

- `LOGFLARE_API_KEY`  
  *no type*  
  Allows you to pass in an API key that will used for authentication. This is intended for programmatic usage where an external program sets the API key. It is advised to use the UI to configure the access tokens instead. If this value is not provided, the default API key will be automatically generated.

- `LOGFLARE_SINGLE_TENANT` **REQUIRED**  
  *no type*  
  This is will seed a singular user into the database, and will disable browser authentication. All browser usage will default to this user. Inviting team users and other team-related functionality is currently not supported for self-hosted. Logflare self-hosted is currently intended for single-user experience only.

- `LOGFLARE_SUPABASE_MODE` **REQUIRED**  
  *no type*  
  This is a special mode for Logflare which will seed additional resources for usage with Supabase self-hosted.

- `POSTGRES_BACKEND_URL` **REQUIRED**  
  *no type*  
  The connection string to the Postgres database.

- `GOOGLE_CLOUD_PROJECT`  
  *no type*  
  The Google Cloud project name containing your BigQuery dataset.

- `GOOGLE_APPLICATION_CREDENTIALS`  
  *no type*  
  The path to your Google Cloud service account JSON key file.

- `BIGQUERY_DATASET`  
  *no type*  
  The name of your BigQuery dataset.

- `LOGFLARE_POSTGRES_SCHEMA`  
  *no type*  
  This ENV variable sets the search path to a custom database schema.